---
import { Image } from "astro:assets";
import type { ImageMetadata } from 'astro';

// Carga todas las imágenes .avif del folder (en tiempo de build)
const modules = import.meta.glob<{ default: ImageMetadata }>('@assets/images/units/*.avif', {
  eager: true,
});

// Extrae los pares [path, metadata]
const entries = Object.entries(modules).map(([path, mod]) => ({
  path,
  image: mod.default,
}));

// Ordena por número en el nombre del archivo (ej: 1.avif, 2.avif, ...)
const images = entries.sort((a, b) => {
  const getNumber = (str: string) => {
    const match = str.match(/(\d+)\.avif$/);
    return match ? parseInt(match[1], 10) : 0;
  };

  return getNumber(a.path) - getNumber(b.path);
}).map((entry) => entry.image);

console.log(images)

---

<section id="unidades">
    <!-- Title and description -->
    <div class="mx-auto mb-6 w-full space-y-1 text-center sm:w-1/2 lg:w-1/3">
        <h2
            class="text-2xl leading-tight font-bold text-balance text-neutral-800 sm:text-3xl dark:text-neutral-200"
        >
        Conoce nuestras unidades
        </h2>
        
        <p class="leading-tight text-pretty text-neutral-600 dark:text-neutral-400">
            Gran variedad de unidades disponibles
        </p>
        
    </div>

    <div class="gallery grid md:grid-cols-2 lg:grid-cols-3 gap-4">
        {images.map((img, index) => (
          <Image
            src={img}
            alt={`Imagen ${index + 1}`}
            format="avif"
            loading="eager"
            class="w-full h-92 object-contain bg-black/10 dark:bg-white/10 rounded-lg p-2"
          />
        ))}
      </div>
</section>

<section class="mt-6">

    <div class="relative overflow-x-auto shadow-md rounded-lg" id="units-table">
        <table class="w-full text-sm text-left rtl:text-right text-neutral-500 dark:text-neutral-400">
            <thead class="text-xs text-neutral-700 uppercase bg-neutral-50 dark:bg-neutral-700 dark:text-neutral-400">
                <tr>
                    <th scope="col" class="px-6 py-3">
                        Tipo de unidad
                    </th>
                    <th scope="col" class="px-6 py-3">
                        Modelo
                    </th>
                    <th scope="col" class="px-6 py-3">
                        Marca
                    </th>
                    <th scope="col" class="px-6 py-3">
                        Año
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr class="bg-white border-b dark:bg-neutral-900 dark:border-neutral-700 border-neutral-200 hover:bg-neutral-50 dark:hover:bg-neutral-600">
                    <th scope="row" class="px-6 py-4 font-medium text-neutral-900 whitespace-nowrap dark:text-white">
                        3.5
                    </th>
                    <td class="px-6 py-4">
                        Captain
                    </td>
                    <td class="px-6 py-4">
                        DFAC
                    </td>
                    <td class="px-6 py-4">
                        2025
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-neutral-900 dark:border-neutral-700 border-neutral-200 hover:bg-neutral-50 dark:hover:bg-neutral-600">
                    <th scope="row" class="px-6 py-4 font-medium text-neutral-900 whitespace-nowrap dark:text-white">
                        3.5
                    </th>
                    <td class="px-6 py-4">
                        Delivery
                    </td>
                    <td class="px-6 py-4">
                        VOLSWAGUEN
                    </td>
                    <td class="px-6 py-4">
                        2025
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-neutral-900 dark:border-neutral-700 border-neutral-200 hover:bg-neutral-50 dark:hover:bg-neutral-600">
                    <th scope="row" class="px-6 py-4 font-medium text-neutral-900 whitespace-nowrap dark:text-white">
                        1.5
                    </th>
                    <td class="px-6 py-4">
                        RAM VAN
                    </td>
                    <td class="px-6 py-4">
                        DODGE
                    </td>
                    <td class="px-6 py-4">
                        1996
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-neutral-900 dark:border-neutral-700 border-neutral-200 hover:bg-neutral-50 dark:hover:bg-neutral-600">
                    <th scope="row" class="px-6 py-4 font-medium text-neutral-900 whitespace-nowrap dark:text-white">
                        1.5
                    </th>
                    <td class="px-6 py-4">
                        URVAN
                    </td>
                    <td class="px-6 py-4">
                        NISSAN
                    </td>
                    <td class="px-6 py-4">
                        2007
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-neutral-900 dark:border-neutral-700 border-neutral-200 hover:bg-neutral-50 dark:hover:bg-neutral-600">
                    <th scope="row" class="px-6 py-4 font-medium text-neutral-900 whitespace-nowrap dark:text-white">
                        1.5
                    </th>
                    <td class="px-6 py-4">
                        TRANSIT
                    </td>
                    <td class="px-6 py-4">
                        FORD
                    </td>
                    <td class="px-6 py-4">
                        2011
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-neutral-900 dark:border-neutral-700 border-neutral-200 hover:bg-neutral-50 dark:hover:bg-neutral-600">
                    <th scope="row" class="px-6 py-4 font-medium text-neutral-900 whitespace-nowrap dark:text-white">
                        3.5
                    </th>
                    <td class="px-6 py-4">
                        HINO
                    </td>
                    <td class="px-6 py-4">
                        HINO
                    </td>
                    <td class="px-6 py-4">
                        2013
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-neutral-900 dark:border-neutral-700 border-neutral-200 hover:bg-neutral-50 dark:hover:bg-neutral-600">
                    <th scope="row" class="px-6 py-4 font-medium text-neutral-900 whitespace-nowrap dark:text-white">
                        3.5
                    </th>
                    <td class="px-6 py-4">
                        F 350
                    </td>
                    <td class="px-6 py-4">
                        FORD
                    </td>
                    <td class="px-6 py-4">
                        2010
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-neutral-900 dark:border-neutral-700 border-neutral-200 hover:bg-neutral-50 dark:hover:bg-neutral-600">
                    <th scope="row" class="px-6 py-4 font-medium text-neutral-900 whitespace-nowrap dark:text-white">
                        1.5
                    </th>
                    <td class="px-6 py-4">
                        EUROVAN
                    </td>
                    <td class="px-6 py-4">
                        VOLSWAGUEN
                    </td>
                    <td class="px-6 py-4">
                        2014
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-neutral-900 dark:border-neutral-700 border-neutral-200 hover:bg-neutral-50 dark:hover:bg-neutral-600">
                    <th scope="row" class="px-6 py-4 font-medium text-neutral-900 whitespace-nowrap dark:text-white">
                        3.5
                    </th>
                    <td class="px-6 py-4">
                        F 350
                    </td>
                    <td class="px-6 py-4">
                        FORD
                    </td>
                    <td class="px-6 py-4">
                        2002
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-neutral-900 dark:border-neutral-700 border-neutral-200 hover:bg-neutral-50 dark:hover:bg-neutral-600">
                    <th scope="row" class="px-6 py-4 font-medium text-neutral-900 whitespace-nowrap dark:text-white">
                        3.5
                    </th>
                    <td class="px-6 py-4">
                        Crafter
                    </td>
                    <td class="px-6 py-4">
                        VOLSWAGUEN
                    </td>
                    <td class="px-6 py-4">
                        2009
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-neutral-900 dark:border-neutral-700 border-neutral-200 hover:bg-neutral-50 dark:hover:bg-neutral-600">
                    <th scope="row" class="px-6 py-4 font-medium text-neutral-900 whitespace-nowrap dark:text-white">
                        3.5
                    </th>
                    <td class="px-6 py-4">
                        F 350
                    </td>
                    <td class="px-6 py-4">
                        FORD
                    </td>
                    <td class="px-6 py-4">
                        2008
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-neutral-900 dark:border-neutral-700 border-neutral-200 hover:bg-neutral-50 dark:hover:bg-neutral-600">
                    <th scope="row" class="px-6 py-4 font-medium text-neutral-900 whitespace-nowrap dark:text-white">
                        Sedan
                    </th>
                    <td class="px-6 py-4">
                        Jetta
                    </td>
                    <td class="px-6 py-4">
                        VOLSWAGUEN
                    </td>
                    <td class="px-6 py-4">
                        2009
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-neutral-900 dark:border-neutral-700 border-neutral-200 hover:bg-neutral-50 dark:hover:bg-neutral-600">
                    <th scope="row" class="px-6 py-4 font-medium text-neutral-900 whitespace-nowrap dark:text-white">
                        Sedan
                    </th>
                    <td class="px-6 py-4">
                        Río
                    </td>
                    <td class="px-6 py-4">
                        KIA
                    </td>
                    <td class="px-6 py-4">
                        2021
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-neutral-900 dark:border-neutral-700 border-neutral-200 hover:bg-neutral-50 dark:hover:bg-neutral-600">
                    <th scope="row" class="px-6 py-4 font-medium text-neutral-900 whitespace-nowrap dark:text-white">
                        3.5
                    </th>
                    <td class="px-6 py-4">
                        Silverado
                    </td>
                    <td class="px-6 py-4">
                        Chevrolet
                    </td>
                    <td class="px-6 py-4">
                        2015
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-neutral-900 dark:border-neutral-700 border-neutral-200 hover:bg-neutral-50 dark:hover:bg-neutral-600">
                    <th scope="row" class="px-6 py-4 font-medium text-neutral-900 whitespace-nowrap dark:text-white">
                        3.5
                    </th>
                    <td class="px-6 py-4">
                        Silverado
                    </td>
                    <td class="px-6 py-4">
                        Chevrolet
                    </td>
                    <td class="px-6 py-4">
                        2015
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-neutral-900 dark:border-neutral-700 border-neutral-200 hover:bg-neutral-50 dark:hover:bg-neutral-600">
                    <th scope="row" class="px-6 py-4 font-medium text-neutral-900 whitespace-nowrap dark:text-white">
                        3.5
                    </th>
                    <td class="px-6 py-4">
                        Captain
                    </td>
                    <td class="px-6 py-4">
                        DFAC
                    </td>
                    <td class="px-6 py-4">
                        2025
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-neutral-900 dark:border-neutral-700 border-neutral-200 hover:bg-neutral-50 dark:hover:bg-neutral-600">
                    <th scope="row" class="px-6 py-4 font-medium text-neutral-900 whitespace-nowrap dark:text-white">
                        1.5
                    </th>
                    <td class="px-6 py-4">
                        S10 Max
                    </td>
                    <td class="px-6 py-4">
                        Chevrolet
                    </td>
                    <td class="px-6 py-4">
                        2023
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-neutral-900 dark:border-neutral-700 border-neutral-200 hover:bg-neutral-50 dark:hover:bg-neutral-600">
                    <th scope="row" class="px-6 py-4 font-medium text-neutral-900 whitespace-nowrap dark:text-white">
                        1.5
                    </th>
                    <td class="px-6 py-4">
                        Hilux
                    </td>
                    <td class="px-6 py-4">
                        Toyota
                    </td>
                    <td class="px-6 py-4">
                        2023
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-neutral-900 dark:border-neutral-700 border-neutral-200 hover:bg-neutral-50 dark:hover:bg-neutral-600">
                    <th scope="row" class="px-6 py-4 font-medium text-neutral-900 whitespace-nowrap dark:text-white">
                        SmallVan
                    </th>
                    <td class="px-6 py-4">
                        Saveiro
                    </td>
                    <td class="px-6 py-4">
                        VOLSWAGUEN
                    </td>
                    <td class="px-6 py-4">
                        2022
                    </td>
                </tr>
                <tr class="bg-white border-b dark:bg-neutral-900 dark:border-neutral-700 border-neutral-200 hover:bg-neutral-50 dark:hover:bg-neutral-600">
                    <th scope="row" class="px-6 py-4 font-medium text-neutral-900 whitespace-nowrap dark:text-white">
                        SmallVan
                    </th>
                    <td class="px-6 py-4">
                        Partner 700
                    </td>
                    <td class="px-6 py-4">
                        PEUGEOT
                    </td>
                    <td class="px-6 py-4">
                        2025
                    </td>
                </tr>
                <tr class="bg-white dark:bg-neutral-900 hover:bg-neutral-50 dark:hover:bg-neutral-600">
                    <th scope="row" class="px-6 py-4 font-medium text-neutral-900 whitespace-nowrap dark:text-white">
                        SmallVan
                    </th>
                    <td class="px-6 py-4">
                        Caddy
                    </td>
                    <td class="px-6 py-4">
                        VOLSWAGUEN
                    </td>
                    <td class="px-6 py-4">
                        2017
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

</section>
